<!DOCTYPE html>
<!--
  Setun Simulator (Setun VS)
  License: MIT (see LICENSE file)
  Copyright (c) 2025 Robson Cassiano
-->
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Fira+Code&display=swap" rel="stylesheet">
  <title>Setun Simulador de Computador Ternário</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div class="top-controls">
  <div class="language-switcher">
    <button id="lang-en">EN</button> | <button id="lang-pt" class="active">PT</button>
  </div>
  <div class="theme-switcher">
    <button id="theme-toggle">
      <!-- SVG Icon will be inserted by JS -->
    </button>
  </div>
</div>


<div class="main-container">
  <h1 data-lang-key="mainTitle">Setun Simulador do Computador Ternário</h1>

  <div class="layout-container">
    <div class="emulator-panel card" id="setun-emulator">
      <!-- A interface do simulador será gerada aqui pelo JavaScript -->
    </div>

    <div class="io-and-status-panel">
      <div class="io-device card">
        <label for="ft1-input" data-lang-key="ft1Label">FT-1 (Entrada de Programa)</label>
        <textarea id="ft1-input" data-lang-key="ft1Placeholder" placeholder="Insira o programa ternário aqui..."></textarea>
        <button id="ft1-load" data-lang-key="loadProgram">Ler Fita do Programa</button>
      </div>
      <div class="io-device card">
        <label for="ft2-input" data-lang-key="ft2Label">FT-2 (Entrada de Dados)</label>
        <textarea id="ft2-input" data-lang-key="ft2Placeholder" placeholder="Insira dados ternários aqui..."></textarea>
        <button id="ft2-load" data-lang-key="loadData">Ler Fita de Dados</button>
      </div>
      <div class="io-device card">
        <div class="io-header">
          <label data-lang-key="printerLabel">Impressora EUM-46</label>
          <button id="clear-printer-btn" title="Limpar Saída">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
          </button>
        </div>
        <div id="printer-output" class="output"></div>
      </div>
    </div>
  </div>

  <div class="info-section card">
    <div class="accordion">
      <div class="accordion-item">
        <div class="accordion-header" data-lang-key="aboutTitle">Sobre o Setun</div>
        <div class="accordion-content">
          <p data-lang-key="aboutText">"Setun VS" é um simulador do Setun MCVM, um computador ternário soviético. Os principais elementos são RAM, registradores, painel de controle e dispositivos periféricos de entrada (FT-1, FT-2) e saída (EUM-46).</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header" data-lang-key="componentsTitle">Componentes Principais</div>
        <div class="accordion-content">
          <div>
            <p><strong><span data-lang-key="registersLabel">Registradores:</span></strong> <span data-lang-key="registersDesc">Exibem o estado interno da máquina.</span></p>
            <ul>
              <li><strong><span data-lang-key="regSLabel">S (Resultado):</span></strong> <span data-lang-key="regSDesc">Registrador de 18 trits para resultados de operações.</span></li>
              <li><strong><span data-lang-key="regRLabel">R (Multiplicador):</span></strong> <span data-lang-key="regRDesc">Registrador de 18 trits usado em operações de multiplicação.</span></li>
              <li><strong><span data-lang-key="regFLabel">F (Modificação):</span></strong> <span data-lang-key="regFDesc">Registrador de modificação de 5 trits.</span></li>
              <li><strong><span data-lang-key="regCLabel">C (Endereço de Comando):</span></strong> <span data-lang-key="regCDesc">Registrador de endereço de comando de 5 trits.</span></li>
              <li><strong><span data-lang-key="regKLabel">K (Comando):</span></strong> <span data-lang-key="regKDesc">Registrador de comando de 9 trits que armazena a instrução atual.</span></li>
              <li><strong><span data-lang-key="regWLabel">ω (w):</span></strong> <span data-lang-key="regWDesc">Determina a transferência de controle em desvios condicionais.</span></li>
              <li><strong><span data-lang-key="regMBLabel">МБ (MB):</span></strong> <span data-lang-key="regMBDesc">Endereço da última zona do tambor magnético acessada.</span></li>
            </ul>
            <p><strong><span data-lang-key="switchesLabel">Interruptores (Entrada de Comando, Endereço de Parada):</span></strong> <span data-lang-key="switchesDesc">Permitem a entrada manual de comandos e endereços. Clique para alternar entre os estados (+1, 0, -1).</span></p>
            <p><strong><span data-lang-key="buttonsLabel">Botões de Controle:</span></strong></p>
            <ul>
              <li><strong><span data-lang-key="btnLoadLabel">Carregar:</span></strong> <span data-lang-key="btnLoadDesc">Carrega dados da fita perfurada do dispositivo FT-1 para a RAM.</span></li>
              <li><strong><span data-lang-key="btnStartLabel">Iniciar:</span></strong> <span data-lang-key="btnStartDesc">Inicia a execução do programa.</span></li>
              <li><strong><span data-lang-key="btnStopLabel">Parar:</span></strong> <span data-lang-key="btnStopDesc">Encerra a execução do programa (não implementado).</span></li>
              <li><strong><span data-lang-key="btnRemoteLabel">Comando Remoto:</span></strong> <span data-lang-key="btnRemoteDesc">Executa o comando inserido manualmente nos interruptores.</span></li>
            </ul>
            <p><strong><span data-lang-key="ioLabel">Dispositivos de E/S:</span></strong></p>
            <ul>
              <li><strong><span data-lang-key="ioFtLabel">FT-1 / FT-2:</span></strong> <span data-lang-key="ioFtDesc">Simulam leitores de fita perfurada para carregar programas e dados.</span></li>
              <li><strong><span data-lang-key="ioPrinterLabel">Impressora EUM-46:</span></strong> <span data-lang-key="ioPrinterDesc">Exibe a saída do programa (parcialmente implementada).</span></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header" data-lang-key="instructionsTitle">Conjunto de Instruções</div>
        <div class="accordion-content">
          <table>
            <thead>
            <tr>
              <th data-lang-key="tableTh1">Código (Ternário)</th>
              <th data-lang-key="tableTh2">Código (Nove)</th>
              <th data-lang-key="tableTh3">Nome da Operação</th>
              <th data-lang-key="tableTh4">Descrição</th>
            </tr>
            </thead>
            <tbody>
            <tr><td>+00</td><td>30</td><td data-lang-key="opName_30">Enviar para S</td><td>(A*) =&gt; (S)</td></tr>
            <tr><td>+0+</td><td>33</td><td data-lang-key="opName_33">Adição a S</td><td>(S)+(A*) =&gt; (S)</td></tr>
            <tr><td>+0-</td><td>3x</td><td data-lang-key="opName_3x">Subtração a S</td><td>(S)-(A*) =&gt; (S)</td></tr>
            <tr><td>++0</td><td>40</td><td data-lang-key="opName_40">Multiplicação 0</td><td>(S)=&gt;(R); (A*)(R)=&gt;(S)</td></tr>
            <tr><td>+++</td><td>43</td><td data-lang-key="opName_43">Multiplicação +</td><td>(S)+(A*)(R)=&gt;(S)</td></tr>
            <tr><td>++-</td><td>4x</td><td data-lang-key="opName_4x">Multiplicação -</td><td>(A*)+(S)(R)=&gt;(S)</td></tr>
            <tr><td>+-0</td><td>20</td><td data-lang-key="opName_20">Multiplicação bit a bit</td><td>(A*)[x](S)=&gt;(S)</td></tr>
            <tr><td>+-+</td><td>23</td><td data-lang-key="opName_23">Enviar para R</td><td>(A*)=&gt;(R)</td></tr>
            <tr><td>+--</td><td>2x</td><td data-lang-key="opName_2x">Parar</td><td data-lang-key="opDesc_2x">Parar; (A*)=&gt;(R)</td></tr>
            <tr><td>0+0</td><td>10</td><td data-lang-key="opName_10">Salto condicional 0</td><td data-lang-key="opDesc_10">A*=>(C) quando w=0</td></tr>
            <tr><td>0++</td><td>13</td><td data-lang-key="opName_13">Salto condicional +</td><td data-lang-key="opDesc_13">A*=>(C) quando w=+</td></tr>
            <tr><td>0+-</td><td>1x</td><td data-lang-key="opName_1x">Salto condicional -</td><td data-lang-key="opDesc_1x">A*=>(C) quando w=-</td></tr>
            <tr><td>000</td><td>00</td><td data-lang-key="opName_00">Salto incondicional</td><td>A*=>(C)</td></tr>
            <tr><td>-00</td><td>x0</td><td data-lang-key="opName_x0">Saída-entrada</td><td data-lang-key="opDesc_x0">Entrada para Fa*. Saída de Fa*</td></tr>
            <tr><td>-++</td><td>y3</td><td data-lang-key="opName_y3">Escrever de S</td><td>(S)=&gt;(A*)</td></tr>
            <tr><td>---</td><td>zhx</td><td data-lang-key="opName_zhx">Parar (Não utilizado)</td><td data-lang-key="opDesc_zhx">Para a execução</td></tr>
            </tbody>
          </table>
          <p data-html-content="true" data-lang-key="instructionsNote"><i>Nota: Este é um subconjunto simplificado para demonstração. A máquina Setun original tinha um conjunto de instruções mais completo.</i></p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header" data-lang-key="usageTitle">Como Usar</div>
        <div class="accordion-content">
          <ol>
            <li><strong data-lang-key="usageLi1_1">Carregar Programa:</strong> <span data-lang-key="usageLi1_2">Insira o programa no campo FT-1 e clique em "Carregar Programa".</span></li>
            <li data-html-content="true" data-lang-key="usageLi2"><strong>Exemplo de Programa:</strong> Para carregar o número 10 e depois adicionar -4, resultando em 6.
              <pre>
// Carrega 10 (...+0+) no Somador S
+00 000000000000000+0+
// Adiciona -4 (...0-+) ao Somador S
+0+ 0000000000000000-+
// Para o programa
--- 000000000000000000
</pre>
            </li>
            <li data-html-content="true" data-lang-key="usageLi3"><strong data-lang-key="usageLi3_1">Carregar para a RAM:</strong> <span data-lang-key="usageLi3_2">Clique no botão <strong>'Carregar'</strong>. Isso transfere os dados da fita para a memória.</span></li>
            <li data-html-content="true" data-lang-key="usageLi4"><strong data-lang-key="usageLi4_1">Executar:</strong> <span data-lang-key="usageLi4_2">Clique no botão <strong>'Iniciar'</strong> para começar a execução.</span></li>
            <li><strong><span data-lang-key="usageLi5_1">Observar:</span></strong> <span data-lang-key="usageLi5_2">As luzes do registrador 'S' mostrarão o valor 6 (...+--).</span></li>
          </ol>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header" data-lang-key="readingTitle">Como Ler os Resultados</div>
        <div class="accordion-content" data-lang-key="readingContent" data-html-content="true">
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p data-lang-key="footerLicense">Licença MIT Robson Cassiano</p>
    <p data-lang-key="footerMotto">Vida Longa e Próspera 🖖🏻</p>
  </footer>
</div>

<script src="js/main.js"></script>

</body>
</html>
